{
    "openapi": "3.0.0",
    "info": {
        "title": "Mi Negocio Pro API",
        "description": "API para gestión completa de negocio: usuarios, productos, ventas, compras y más",
        "contact": {
            "email": "support@minegocio.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "API Server Local"
        }
    ],
    "paths": {
        "/api/login": {
            "post": {
                "tags": ["Authentication"],
                "summary": "Iniciar sesión",
                "description": "Autenticar usuario y obtener token de acceso. Los usuarios inactivos no podrán autenticarse.",
                "operationId": "login",
                "requestBody": {
                    "description": "Credenciales de autenticación",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LoginResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El email es requerido"
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña es requerida"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales inválidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Las credenciales proporcionadas son incorrectas."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Cuenta inactiva",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Tu cuenta está inactiva. Contacta al administrador."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/logout": {
            "post": {
                "tags": ["Authentication"],
                "summary": "Cerrar sesión",
                "description": "Cerrar sesión actual y revocar token",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "Sesión cerrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Sesión cerrada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/logout-all": {
            "post": {
                "tags": ["Authentication"],
                "summary": "Cerrar todas las sesiones",
                "description": "Cerrar sesión en todos los dispositivos",
                "operationId": "logoutAll",
                "responses": {
                    "200": {
                        "description": "Sesiones cerradas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Sesión cerrada en todos los dispositivos"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/me": {
            "get": {
                "tags": ["Authentication"],
                "summary": "Obtener usuario actual",
                "description": "Obtener información del usuario autenticado",
                "operationId": "me",
                "responses": {
                    "200": {
                        "description": "Usuario actual",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/refresh": {
            "post": {
                "tags": ["Authentication"],
                "summary": "Renovar token",
                "description": "Renovar token de autenticación",
                "operationId": "refresh",
                "responses": {
                    "200": {
                        "description": "Token renovado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token renovado exitosamente"
                                        },
                                        "user": {
                                            "type": "object"
                                        },
                                        "token": {
                                            "type": "string",
                                            "example": "1|xyz789..."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business": {
            "get": {
                "tags": ["Business"],
                "summary": "Obtener información del negocio",
                "description": "Obtener la configuración e información del negocio",
                "operationId": "getBusiness",
                "responses": {
                    "200": {
                        "description": "Información del negocio obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Información del negocio obtenida exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "business": {
                                                    "type": "object"
                                                },
                                                "tax_rate_percentage": {
                                                    "type": "number",
                                                    "example": 19
                                                },
                                                "currency_symbol": {
                                                    "type": "string",
                                                    "example": "$"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Business"],
                "summary": "Actualizar información del negocio",
                "description": "Actualizar toda la información del negocio",
                "operationId": "updateBusiness",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Mi Negocio Actualizado"
                                    },
                                    "owner_name": {
                                        "type": "string",
                                        "example": "Propietario Actualizado"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+57 300 123 4567"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "info@minegocio.com"
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "Calle 123 #45-67"
                                    },
                                    "currency": {
                                        "type": "string",
                                        "example": "COP"
                                    },
                                    "tax_rate": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 0.19
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Información actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Información del negocio actualizada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "business": {
                                                    "type": "object"
                                                },
                                                "tax_rate_percentage": {
                                                    "type": "number"
                                                },
                                                "currency_symbol": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "patch": {
                "tags": ["Business"],
                "summary": "Actualización parcial del negocio",
                "description": "Actualizar solo campos específicos de la información del negocio",
                "operationId": "patchBusiness",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Mi Negocio Actualizado"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+57 300 123 4567"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "info@minegocio.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Información actualizada parcialmente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Información del negocio actualizada parcialmente"
                                        },
                                        "data": {
                                            "properties": {
                                                "business": {
                                                    "type": "object"
                                                },
                                                "updated_fields": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business/summary": {
            "get": {
                "tags": ["Business"],
                "summary": "Obtener resumen del negocio",
                "description": "Obtener resumen e información clave del negocio para dashboard",
                "operationId": "getBusinessSummary",
                "responses": {
                    "200": {
                        "description": "Resumen obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Resumen del negocio obtenido exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "business_info": {
                                                    "properties": {
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Mi Negocio"
                                                        },
                                                        "owner": {
                                                            "type": "string",
                                                            "example": "Propietario"
                                                        },
                                                        "currency": {
                                                            "type": "string",
                                                            "example": "COP"
                                                        },
                                                        "currency_symbol": {
                                                            "type": "string",
                                                            "example": "$"
                                                        },
                                                        "tax_rate": {
                                                            "type": "string",
                                                            "example": "19%"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "setup_completed": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "last_updated": {
                                                    "type": "string",
                                                    "example": "2025-08-24 10:00:00"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/revenue/{period}": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Obtener ingresos por período",
                "description": "Obtiene ingresos y transacciones para today, this_month o last_month",
                "operationId": "2bd6ebfa3c36b80de05f03444cb58ebb",
                "parameters": [
                    {
                        "name": "period",
                        "in": "path",
                        "description": "Período: today, this_month, last_month",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": ["today", "this_month", "last_month"]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ingresos y transacciones del período",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "period": {
                                            "type": "string"
                                        },
                                        "revenue": {
                                            "type": "number",
                                            "format": "float"
                                        },
                                        "transactions": {
                                            "type": "integer"
                                        },
                                        "avg_ticket": {
                                            "type": "number",
                                            "format": "float"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/product-stock/{productName}": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Consultar stock de productos",
                "description": "Busca productos por nombre y muestra su estado de stock",
                "operationId": "4476660502313ad4d81eb1547275d181",
                "parameters": [
                    {
                        "name": "productName",
                        "in": "path",
                        "description": "Nombre del producto a buscar",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estado de stock de productos encontrados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "name": {
                                                "type": "string"
                                            },
                                            "stock": {
                                                "type": "integer"
                                            },
                                            "min_stock": {
                                                "type": "integer"
                                            },
                                            "status": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/top-selling-products": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Productos más vendidos",
                "description": "Obtiene los productos más vendidos en los últimos días",
                "operationId": "28c1a030e1b3fc3928b4c3187ce08d5d",
                "parameters": [
                    {
                        "name": "days",
                        "in": "query",
                        "description": "Número de días hacia atrás (default: 30)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos más vendidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "product_name": {
                                                "type": "string"
                                            },
                                            "total_sold": {
                                                "type": "integer"
                                            },
                                            "revenue": {
                                                "type": "number",
                                                "format": "float"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/daily-sales": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Ventas diarias",
                "description": "Obtiene reporte de ventas agrupadas por día",
                "operationId": "860e462894cb4c1f230b87d9283f5f94",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número de días a mostrar (default: 30)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 30
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reporte de ventas diarias",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "sale_date": {
                                                "type": "string",
                                                "format": "date"
                                            },
                                            "transactions": {
                                                "type": "integer"
                                            },
                                            "revenue": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "avg_ticket": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "cash_sales": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "card_sales": {
                                                "type": "number",
                                                "format": "float"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/monthly-sales": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Ventas mensuales",
                "description": "Obtiene reporte de ventas agrupadas por mes",
                "operationId": "a5562cf3af671d9395ba848d00c2cf82",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número de meses a mostrar (default: 12)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 12
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reporte de ventas mensuales",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "month": {
                                                "type": "string",
                                                "format": "date"
                                            },
                                            "transactions": {
                                                "type": "integer"
                                            },
                                            "revenue": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "avg_ticket": {
                                                "type": "number",
                                                "format": "float"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/top-products": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Top productos últimos 30 días",
                "description": "Obtiene los productos más vendidos en los últimos 30 días",
                "operationId": "1d69fa6210f1fcca2e686297180fd3d6",
                "responses": {
                    "200": {
                        "description": "Top 10 productos más vendidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "total_sold": {
                                                "type": "integer"
                                            },
                                            "total_revenue": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "times_sold": {
                                                "type": "integer"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/low-stock": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Productos con stock bajo",
                "description": "Obtiene productos que están en stock bajo o sin stock",
                "operationId": "4ea2ad37056d0d7592e6b91272537f1b",
                "responses": {
                    "200": {
                        "description": "Productos con stock bajo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "stock": {
                                                "type": "integer"
                                            },
                                            "min_stock": {
                                                "type": "integer"
                                            },
                                            "category": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/business-intelligence/dashboard": {
            "get": {
                "tags": ["Business Intelligence"],
                "summary": "Dashboard principal",
                "description": "Obtiene datos resumidos para el dashboard principal",
                "operationId": "84ca501c279e3ea55d428ac76f9f116c",
                "responses": {
                    "200": {
                        "description": "Datos del dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "today_revenue": {
                                            "type": "object"
                                        },
                                        "month_revenue": {
                                            "type": "object"
                                        },
                                        "top_products": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "low_stock_count": {
                                            "type": "integer"
                                        },
                                        "recent_sales": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/categories": {
            "get": {
                "tags": ["Categories"],
                "summary": "Listar categorías",
                "description": "Obtener lista de categorías con filtros opcionales",
                "operationId": "getCategoriesList",
                "parameters": [
                    {
                        "name": "is_active",
                        "in": "query",
                        "description": "Filtrar por estado activo",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar por nombre de categoría",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categorías obtenidas exitosamente"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Categories"],
                "summary": "Crear categoría",
                "description": "Crear nueva categoría de productos",
                "operationId": "createCategory",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["name"],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Nueva Categoría"
                                    },
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Categoría creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría creada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/categories/{id}": {
            "get": {
                "tags": ["Categories"],
                "summary": "Obtener categoría",
                "description": "Obtener detalles de una categoría específica",
                "operationId": "getCategory",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles de la categoría",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría obtenida exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Categories"],
                "summary": "Actualizar categoría",
                "description": "Actualizar información de una categoría existente",
                "operationId": "updateCategory",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Categoría Actualizada"
                                    },
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Categoría actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Categories"],
                "summary": "Eliminar categoría",
                "description": "Eliminar una categoría del sistema",
                "operationId": "deleteCategory",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Categoría eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría eliminada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se puede eliminar categoría con productos asociados"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/categories/{id}/toggle-status": {
            "patch": {
                "tags": ["Categories"],
                "summary": "Cambiar estado de categoría",
                "description": "Activar o desactivar una categoría",
                "operationId": "toggleCategoryStatus",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estado de categoría cambiado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría activada"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products": {
            "get": {
                "tags": ["Products"],
                "summary": "Get list of products",
                "description": "Returns list of products with filtering options",
                "operationId": "getProductsList",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search in product name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Filter by category ID",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "is_active",
                        "in": "query",
                        "description": "Filter by active status",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "low_stock",
                        "in": "query",
                        "description": "Show only products with low stock",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "out_of_stock",
                        "in": "query",
                        "description": "Show only products out of stock",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Productos obtenidos exitosamente"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "image_path": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "image_url": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "category_id": {
                                                        "type": "integer"
                                                    },
                                                    "cost_price": {
                                                        "type": "number"
                                                    },
                                                    "sale_price": {
                                                        "type": "number"
                                                    },
                                                    "stock": {
                                                        "type": "integer"
                                                    },
                                                    "min_stock": {
                                                        "type": "integer"
                                                    },
                                                    "is_active": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Products"],
                "summary": "Create new product",
                "description": "Creates a new product",
                "operationId": "storeProduct",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": ["name", "sale_price"],
                                "properties": {
                                    "name": {
                                        "description": "Product name",
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Coca Cola 600ml"
                                    },
                                    "image": {
                                        "description": "Product image (jpeg,png,jpg,gif max 2MB)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "category_id": {
                                        "description": "Category ID",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "cost_price": {
                                        "description": "Cost price",
                                        "type": "number",
                                        "format": "float",
                                        "example": 15.5
                                    },
                                    "sale_price": {
                                        "description": "Sale price",
                                        "type": "number",
                                        "format": "float",
                                        "example": 20
                                    },
                                    "stock": {
                                        "description": "Initial stock",
                                        "type": "integer",
                                        "example": 100
                                    },
                                    "min_stock": {
                                        "description": "Minimum stock alert",
                                        "type": "integer",
                                        "example": 10
                                    },
                                    "is_active": {
                                        "description": "Product status",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Product created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Producto creado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products/{id}": {
            "get": {
                "tags": ["Products"],
                "summary": "Get product information",
                "description": "Returns product data",
                "operationId": "showProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Producto obtenido exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Products"],
                "summary": "Update product",
                "description": "Updates product data",
                "operationId": "updateProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Product name",
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Coca Cola 600ml"
                                    },
                                    "image": {
                                        "description": "Product image (jpeg,png,jpg,gif max 2MB)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "category_id": {
                                        "description": "Category ID",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "cost_price": {
                                        "description": "Cost price",
                                        "type": "number",
                                        "format": "float",
                                        "example": 15.5
                                    },
                                    "sale_price": {
                                        "description": "Sale price",
                                        "type": "number",
                                        "format": "float",
                                        "example": 20
                                    },
                                    "stock": {
                                        "description": "Current stock",
                                        "type": "integer",
                                        "example": 100
                                    },
                                    "min_stock": {
                                        "description": "Minimum stock alert",
                                        "type": "integer",
                                        "example": 10
                                    },
                                    "is_active": {
                                        "description": "Product status",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Product updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Producto actualizado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Products"],
                "summary": "Delete product",
                "description": "Deletes a product if not referenced by sales or purchases",
                "operationId": "deleteProduct",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Producto eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Cannot delete product with existing sales or purchases"
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products/{id}/toggle-status": {
            "patch": {
                "tags": ["Products"],
                "summary": "Toggle product active status",
                "description": "Toggles the is_active status of a product",
                "operationId": "toggleProductStatus",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product status toggled successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Estado del producto actualizado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products/{id}/adjust-stock": {
            "post": {
                "tags": ["Products"],
                "summary": "Adjust product stock",
                "description": "Manually adjust product stock with reason",
                "operationId": "adjustProductStock",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "adjustment": {
                                        "description": "Stock adjustment (+/-)",
                                        "type": "integer",
                                        "example": 10
                                    },
                                    "reason": {
                                        "description": "Reason for adjustment",
                                        "type": "string",
                                        "example": "Inventory count correction"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stock adjusted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Stock ajustado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products/{id}/image": {
            "delete": {
                "tags": ["Products"],
                "summary": "Delete product image",
                "description": "Deletes the image of a product",
                "operationId": "deleteProductImage",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Product ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Image deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Imagen eliminada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Product not found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchase-items": {
            "get": {
                "tags": ["Purchase Items"],
                "summary": "Listar items de compras",
                "description": "Obtiene una lista paginada de items de compras con filtros opcionales",
                "operationId": "f1ab0227c0511c7ac5c48a694450d7b5",
                "parameters": [
                    {
                        "name": "purchase_id",
                        "in": "query",
                        "description": "Filtrar por ID de compra",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filtrar por ID de producto",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "min_quantity",
                        "in": "query",
                        "description": "Cantidad mínima",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "max_unit_cost",
                        "in": "query",
                        "description": "Costo unitario máximo",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "with_relations",
                        "in": "query",
                        "description": "Incluir relaciones (producto y compra)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de items de compras",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/PurchaseItems"
                                            }
                                        },
                                        "current_page": {
                                            "type": "integer"
                                        },
                                        "last_page": {
                                            "type": "integer"
                                        },
                                        "per_page": {
                                            "type": "integer"
                                        },
                                        "total": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Purchase Items"],
                "summary": "Crear item de compra",
                "description": "Crea un nuevo item de compra",
                "operationId": "cf2b653075012b51604daaf270132155",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "purchase_id",
                                    "product_id",
                                    "quantity",
                                    "unit_cost"
                                ],
                                "properties": {
                                    "purchase_id": {
                                        "description": "ID de la compra",
                                        "type": "integer"
                                    },
                                    "product_id": {
                                        "description": "ID del producto",
                                        "type": "integer"
                                    },
                                    "quantity": {
                                        "description": "Cantidad",
                                        "type": "integer"
                                    },
                                    "unit_cost": {
                                        "description": "Costo unitario",
                                        "type": "number",
                                        "format": "float"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Item de compra creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Item de compra creado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/PurchaseItems"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Errores de validación"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchase-items/{id}": {
            "get": {
                "tags": ["Purchase Items"],
                "summary": "Obtener item de compra",
                "description": "Obtiene los detalles de un item de compra específico",
                "operationId": "7a85221db21a9b31e69a08732527743f",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del item de compra",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PurchaseItems"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Item de compra no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Purchase Items"],
                "summary": "Actualizar item de compra",
                "description": "Actualiza los datos de un item de compra existente",
                "operationId": "1c5b2896ff853867b765ea142f089509",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "purchase_id": {
                                        "description": "ID de la compra",
                                        "type": "integer"
                                    },
                                    "product_id": {
                                        "description": "ID del producto",
                                        "type": "integer"
                                    },
                                    "quantity": {
                                        "description": "Cantidad",
                                        "type": "integer"
                                    },
                                    "unit_cost": {
                                        "description": "Costo unitario",
                                        "type": "number",
                                        "format": "float"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Item de compra actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Item de compra actualizado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/PurchaseItems"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Purchase Items"],
                "summary": "Eliminar item de compra",
                "description": "Elimina un item de compra existente",
                "operationId": "76775767b76154cfd63e88c7cc01a358",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item de compra eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Item de compra eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases/{purchase_id}/items": {
            "get": {
                "tags": ["Purchase Items"],
                "summary": "Obtener items de una compra",
                "description": "Obtiene todos los items de una compra específica",
                "operationId": "a978377e19694d12e43c952944d27fce",
                "parameters": [
                    {
                        "name": "purchase_id",
                        "in": "path",
                        "description": "ID de la compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Items de la compra",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/PurchaseItems"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchase-items/stats": {
            "get": {
                "tags": ["Purchase Items"],
                "summary": "Estadísticas de items de compras",
                "description": "Obtiene estadísticas generales de los items de compras",
                "operationId": "af4cf96ef37ad88a3fba82e1fd027d12",
                "responses": {
                    "200": {
                        "description": "Estadísticas de items de compras",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "general_stats": {
                                            "type": "object"
                                        },
                                        "most_purchased_products": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "recent_purchases": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "cost_analysis": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "top_suppliers": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/products/{product_id}/purchase-history": {
            "get": {
                "tags": ["Purchase Items"],
                "summary": "Historial de compras de un producto",
                "description": "Obtiene el historial de compras de un producto específico",
                "operationId": "2eb99de4c04971126465d32a319ca166",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número máximo de registros",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de compras del producto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/PurchaseItems"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases": {
            "get": {
                "tags": ["Purchases"],
                "summary": "Listar compras",
                "description": "Obtiene la lista de compras con filtros opcionales",
                "operationId": "getPurchases",
                "parameters": [
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Fecha desde (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Fecha hasta (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "received_by",
                        "in": "query",
                        "description": "Filtrar por ID de usuario que recibió",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "supplier_name",
                        "in": "query",
                        "description": "Filtrar por nombre de proveedor",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de compras",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Purchases"],
                "summary": "Crear nueva compra",
                "description": "Crea una nueva compra/entrada de inventario",
                "operationId": "createPurchase",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["received_by"],
                                "properties": {
                                    "supplier_name": {
                                        "description": "Nombre del proveedor",
                                        "type": "string",
                                        "example": "Distribuidora ABC"
                                    },
                                    "notes": {
                                        "description": "Notas adicionales",
                                        "type": "string",
                                        "example": "Compra de productos varios"
                                    },
                                    "purchase_date": {
                                        "description": "Fecha de la compra",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-08-24"
                                    },
                                    "received_by": {
                                        "description": "ID del usuario que recibió",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compra creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compra creada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Datos inválidos"
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Usuario no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases/{id}": {
            "get": {
                "tags": ["Purchases"],
                "summary": "Obtener compra específica",
                "description": "Obtiene los detalles de una compra específica con sus items",
                "operationId": "getPurchase",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles de la compra",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Compra no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Purchases"],
                "summary": "Actualizar compra",
                "description": "Actualiza una compra existente",
                "operationId": "updatePurchase",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "supplier_name": {
                                        "description": "Nuevo nombre del proveedor",
                                        "type": "string",
                                        "example": "Distribuidora XYZ"
                                    },
                                    "notes": {
                                        "description": "Nuevas notas",
                                        "type": "string",
                                        "example": "Notas actualizadas"
                                    },
                                    "purchase_date": {
                                        "description": "Nueva fecha de compra",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-08-25"
                                    },
                                    "received_by": {
                                        "description": "Nuevo ID del usuario que recibió",
                                        "type": "integer",
                                        "example": 2
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Compra actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compra actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Datos inválidos"
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Compra no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Purchases"],
                "summary": "Eliminar compra",
                "description": "Elimina una compra y todos sus items asociados",
                "operationId": "deletePurchase",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compra eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compra eliminada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se puede eliminar esta compra"
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Compra no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases/stats": {
            "get": {
                "tags": ["Purchases"],
                "summary": "Estadísticas de compras",
                "description": "Obtiene estadísticas de compras con filtros opcionales",
                "operationId": "getPurchasesStats",
                "parameters": [
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Fecha desde (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Fecha hasta (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "received_by",
                        "in": "query",
                        "description": "Filtrar por ID de usuario",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "supplier_name",
                        "in": "query",
                        "description": "Filtrar por nombre de proveedor",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estadísticas de compras",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_purchases": {
                                                    "type": "integer"
                                                },
                                                "total_amount": {
                                                    "type": "number",
                                                    "format": "decimal"
                                                },
                                                "average_amount": {
                                                    "type": "number",
                                                    "format": "decimal"
                                                },
                                                "monthly_purchases": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "top_suppliers": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases/recent": {
            "get": {
                "tags": ["Purchases"],
                "summary": "Compras recientes",
                "description": "Obtiene las compras más recientes",
                "operationId": "getRecentPurchases",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número de compras a obtener",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 50,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compras recientes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/purchases/{id}/summary": {
            "get": {
                "tags": ["Purchases"],
                "summary": "Resumen de compra",
                "description": "Obtiene un resumen detallado de una compra específica",
                "operationId": "getPurchaseSummary",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la compra",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Resumen de la compra",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "purchase_id": {
                                                    "type": "integer"
                                                },
                                                "supplier_name": {
                                                    "type": "string"
                                                },
                                                "total_items": {
                                                    "type": "integer"
                                                },
                                                "total_amount": {
                                                    "type": "string"
                                                },
                                                "items": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Compra no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sale-items": {
            "get": {
                "tags": ["Sale Items"],
                "summary": "Listar items de venta",
                "description": "Obtiene la lista de items de venta con filtros opcionales",
                "operationId": "getSaleItems",
                "parameters": [
                    {
                        "name": "sale_id",
                        "in": "query",
                        "description": "Filtrar por ID de venta",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filtrar por ID de producto",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Fecha desde (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Fecha hasta (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de items de venta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Sale Items"],
                "summary": "Crear nuevo item de venta",
                "description": "Crea un nuevo item de venta y actualiza el stock del producto",
                "operationId": "createSaleItem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "sale_id",
                                    "product_id",
                                    "quantity",
                                    "unit_price"
                                ],
                                "properties": {
                                    "sale_id": {
                                        "description": "ID de la venta",
                                        "type": "integer"
                                    },
                                    "product_id": {
                                        "description": "ID del producto",
                                        "type": "integer"
                                    },
                                    "quantity": {
                                        "description": "Cantidad a vender",
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "unit_price": {
                                        "description": "Precio unitario",
                                        "type": "number",
                                        "format": "decimal",
                                        "minimum": 0
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Item de venta creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Item de venta creado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Datos inválidos o stock insuficiente"
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Venta o producto no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sale-items/{id}": {
            "get": {
                "tags": ["Sale Items"],
                "summary": "Obtener item de venta específico",
                "description": "Obtiene los detalles de un item de venta específico",
                "operationId": "getSaleItem",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del item de venta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Item de venta no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Sale Items"],
                "summary": "Actualizar item de venta",
                "description": "Actualiza un item de venta existente y ajusta el stock del producto",
                "operationId": "updateSaleItem",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": ["quantity", "unit_price"],
                                "properties": {
                                    "quantity": {
                                        "description": "Nueva cantidad",
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "unit_price": {
                                        "description": "Nuevo precio unitario",
                                        "type": "number",
                                        "format": "decimal",
                                        "minimum": 0
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Item de venta actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Item de venta actualizado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Datos inválidos o stock insuficiente"
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Item de venta no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Sale Items"],
                "summary": "Eliminar item de venta",
                "description": "Elimina un item de venta y restaura el stock del producto",
                "operationId": "deleteSaleItem",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del item de venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item de venta eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Item de venta eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Item de venta no encontrado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sale-items/by-sale/{saleId}": {
            "get": {
                "tags": ["Sale Items"],
                "summary": "Obtener items de una venta específica",
                "description": "Obtiene todos los items que pertenecen a una venta específica",
                "operationId": "getSaleItemsBySale",
                "parameters": [
                    {
                        "name": "saleId",
                        "in": "path",
                        "description": "ID de la venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Items de la venta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "summary": {
                                            "properties": {
                                                "total_items": {
                                                    "type": "integer"
                                                },
                                                "total_quantity": {
                                                    "type": "integer"
                                                },
                                                "total_amount": {
                                                    "type": "number",
                                                    "format": "decimal"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    },
                    "404": {
                        "description": "Venta no encontrada"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sale-items/stats": {
            "get": {
                "tags": ["Sale Items"],
                "summary": "Estadísticas de items de venta",
                "description": "Obtiene estadísticas de items de venta con filtros opcionales",
                "operationId": "getSaleItemsStats",
                "parameters": [
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Fecha desde (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Fecha hasta (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filtrar por ID de producto",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estadísticas de items de venta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_items": {
                                                    "type": "integer"
                                                },
                                                "total_quantity": {
                                                    "type": "integer"
                                                },
                                                "total_amount": {
                                                    "type": "number",
                                                    "format": "decimal"
                                                },
                                                "average_unit_price": {
                                                    "type": "number",
                                                    "format": "decimal"
                                                },
                                                "most_sold_products": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "product_id": {
                                                                "type": "integer"
                                                            },
                                                            "product": {
                                                                "type": "object"
                                                            },
                                                            "total_quantity": {
                                                                "type": "integer"
                                                            },
                                                            "total_revenue": {
                                                                "type": "number",
                                                                "format": "decimal"
                                                            },
                                                            "times_sold": {
                                                                "type": "integer"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "403": {
                        "description": "Prohibido"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sales": {
            "get": {
                "tags": ["Sales"],
                "summary": "Lista ventas con filtros opcionales",
                "description": "Obtiene lista paginada de ventas con filtros por fecha, vendedor, método de pago y búsqueda",
                "operationId": "getSales",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Búsqueda por número de venta o nombre de cliente",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "description": "Fecha de inicio para filtrar ventas",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "description": "Fecha de fin para filtrar ventas",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "payment_method",
                        "in": "query",
                        "description": "Filtrar por método de pago",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": ["cash", "card", "transfer", "credit"]
                        }
                    },
                    {
                        "name": "sold_by",
                        "in": "query",
                        "description": "Filtrar por ID del vendedor",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de ventas obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ventas obtenidas exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "sale_number": {
                                                                "type": "string"
                                                            },
                                                            "customer_name": {
                                                                "type": "string"
                                                            },
                                                            "total": {
                                                                "type": "number"
                                                            },
                                                            "payment_method": {
                                                                "type": "string"
                                                            },
                                                            "payment_method_label": {
                                                                "type": "string"
                                                            },
                                                            "sale_date": {
                                                                "type": "string"
                                                            },
                                                            "sold_by": {
                                                                "type": "integer"
                                                            },
                                                            "notes": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Prohibido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permisos para realizar esta acción"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Sales"],
                "summary": "Crear nueva venta",
                "description": "Crea una nueva venta en el sistema",
                "operationId": "createSale",
                "requestBody": {
                    "description": "Datos de la venta",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "total",
                                    "payment_method",
                                    "sale_date",
                                    "sold_by"
                                ],
                                "properties": {
                                    "customer_name": {
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "total": {
                                        "type": "number",
                                        "example": 15500.5
                                    },
                                    "payment_method": {
                                        "type": "string",
                                        "enum": [
                                            "cash",
                                            "card",
                                            "transfer",
                                            "credit"
                                        ],
                                        "example": "cash"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "example": "Venta con descuento especial"
                                    },
                                    "sale_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-08-24"
                                    },
                                    "sold_by": {
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Venta creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "sale_number": {
                                                    "type": "string"
                                                },
                                                "customer_name": {
                                                    "type": "string"
                                                },
                                                "total": {
                                                    "type": "number"
                                                },
                                                "payment_method": {
                                                    "type": "string"
                                                },
                                                "payment_method_label": {
                                                    "type": "string"
                                                },
                                                "sale_date": {
                                                    "type": "string"
                                                },
                                                "sold_by": {
                                                    "type": "integer"
                                                },
                                                "notes": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sales/{id}": {
            "get": {
                "tags": ["Sales"],
                "summary": "Obtener venta específica",
                "description": "Obtiene los detalles de una venta específica",
                "operationId": "getSale",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Venta obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta obtenida exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "sale_number": {
                                                    "type": "string"
                                                },
                                                "customer_name": {
                                                    "type": "string"
                                                },
                                                "total": {
                                                    "type": "number"
                                                },
                                                "payment_method": {
                                                    "type": "string"
                                                },
                                                "payment_method_label": {
                                                    "type": "string"
                                                },
                                                "sale_date": {
                                                    "type": "string"
                                                },
                                                "sold_by": {
                                                    "type": "integer"
                                                },
                                                "notes": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Venta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Sales"],
                "summary": "Actualizar venta",
                "description": "Actualiza los datos de una venta existente",
                "operationId": "updateSale",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos actualizados de la venta",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Venta actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Sales"],
                "summary": "Eliminar venta",
                "description": "Elimina una venta del sistema",
                "operationId": "deleteSale",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la venta",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Venta eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta eliminada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Venta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Venta no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/sales/stats": {
            "get": {
                "tags": ["Sales"],
                "summary": "Obtener estadísticas de ventas",
                "description": "Obtiene estadísticas de ventas por diferentes períodos",
                "operationId": "getSalesStats",
                "responses": {
                    "200": {
                        "description": "Estadísticas obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Estadísticas obtenidas exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "today_total": {
                                                    "type": "number"
                                                },
                                                "today_count": {
                                                    "type": "integer"
                                                },
                                                "week_total": {
                                                    "type": "number"
                                                },
                                                "month_total": {
                                                    "type": "number"
                                                },
                                                "payment_methods": {
                                                    "properties": {
                                                        "cash": {
                                                            "type": "number"
                                                        },
                                                        "card": {
                                                            "type": "number"
                                                        },
                                                        "transfer": {
                                                            "type": "number"
                                                        },
                                                        "credit": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": ["Users"],
                "summary": "Listar usuarios",
                "description": "Obtener lista paginada de usuarios. Solo usuarios con rol 'owner' pueden ver la lista de usuarios.",
                "operationId": "getUsersList",
                "parameters": [
                    {
                        "name": "role",
                        "in": "query",
                        "description": "Filtrar por rol",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": ["owner", "employee"]
                        }
                    },
                    {
                        "name": "active",
                        "in": "query",
                        "description": "Filtrar por estado activo",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar por nombre o email",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de usuarios",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/UserResponse"
                                            }
                                        },
                                        "links": {
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para realizar esta acción"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": ["Users"],
                "summary": "Crear nuevo usuario",
                "description": "Crear un nuevo usuario en el sistema. Solo usuarios con rol 'owner' pueden crear usuarios.",
                "operationId": "createUser",
                "requestBody": {
                    "description": "Datos del usuario a crear",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "first_name",
                                    "last_name",
                                    "email",
                                    "password",
                                    "role"
                                ],
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "usuario@ejemplo.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+1234567890",
                                        "nullable": true
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": ["owner", "employee"],
                                        "example": "employee"
                                    },
                                    "active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario creado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para realizar esta acción"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/{id}": {
            "get": {
                "tags": ["Users"],
                "summary": "Obtener usuario",
                "description": "Obtener detalles de un usuario específico. Los usuarios solo pueden ver su propia información a menos que tengan rol 'owner'.",
                "operationId": "getUser",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para ver este usuario"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el usuario especificado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Users"],
                "summary": "Actualizar usuario",
                "description": "Actualizar información de un usuario existente. Los usuarios solo pueden actualizar su propia información a menos que tengan rol 'owner'.",
                "operationId": "updateUser",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos del usuario a actualizar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "usuario@ejemplo.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+1234567890",
                                        "nullable": true
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "newpassword123"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": ["owner", "employee"],
                                        "example": "employee"
                                    },
                                    "active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario actualizado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para actualizar este usuario"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el usuario especificado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": ["Users"],
                "summary": "Eliminar usuario",
                "description": "Eliminar un usuario del sistema. Solo usuarios con rol 'owner' pueden eliminar usuarios. No se puede eliminar el último propietario del sistema.",
                "operationId": "deleteUser",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para eliminar usuarios"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el usuario especificado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "No se puede eliminar al último propietario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se puede eliminar al último propietario del sistema"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/profile": {
            "get": {
                "tags": ["Users"],
                "summary": "Obtener perfil actual",
                "description": "Obtener información del perfil del usuario autenticado",
                "operationId": "getUserProfile",
                "responses": {
                    "200": {
                        "description": "Perfil del usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autenticado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": ["Users"],
                "summary": "Actualizar perfil actual",
                "description": "Actualizar la información del perfil del usuario autenticado",
                "operationId": "updateUserProfile",
                "requestBody": {
                    "description": "Datos del perfil a actualizar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Juan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Pérez"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+1234567890",
                                        "nullable": true
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "usuario@ejemplo.com"
                                    },
                                    "current_password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "currentpassword123"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "newpassword123"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "newpassword123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Perfil actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Perfil actualizado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autenticado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "LoginRequest": {
                "required": ["email", "password"],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "usuario@ejemplo.com"
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "example": "password123"
                    }
                },
                "type": "object"
            },
            "LoginResponse": {
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Inicio de sesión exitoso"
                    },
                    "user": {
                        "$ref": "#/components/schemas/UserResponse"
                    },
                    "token": {
                        "type": "string",
                        "example": "1|abcdef123456..."
                    }
                },
                "type": "object"
            },
            "Business": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Mi Negocio"
                    },
                    "owner_name": {
                        "type": "string",
                        "example": "Propietario"
                    },
                    "phone": {
                        "type": "string",
                        "example": "+57 300 123 4567"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "info@minegocio.com"
                    },
                    "address": {
                        "type": "string",
                        "example": "Calle 123 #45-67"
                    },
                    "currency": {
                        "type": "string",
                        "example": "COP"
                    },
                    "tax_rate": {
                        "type": "number",
                        "format": "float",
                        "example": 0.19
                    },
                    "created_at": {
                        "type": "string",
                        "format": "datetime"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "datetime"
                    }
                },
                "type": "object"
            },
            "Category": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Bebidas"
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "datetime",
                        "example": "2025-08-24T10:00:00.000000Z"
                    },
                    "active_products_count": {
                        "type": "integer",
                        "example": 5
                    }
                },
                "type": "object"
            },
            "User": {
                "required": [
                    "first_name",
                    "last_name",
                    "email",
                    "password",
                    "role"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64",
                        "readOnly": true,
                        "example": 1
                    },
                    "first_name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "usuario@ejemplo.com"
                    },
                    "phone": {
                        "type": "string",
                        "example": "+1234567890",
                        "nullable": true
                    },
                    "role": {
                        "type": "string",
                        "enum": ["owner", "employee"],
                        "example": "employee"
                    },
                    "active": {
                        "type": "boolean",
                        "example": true
                    },
                    "business_name": {
                        "type": "string",
                        "example": "Mi Negocio",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "example": "2025-08-24T10:00:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true,
                        "example": "2025-08-24T10:00:00Z"
                    }
                },
                "type": "object"
            },
            "UserResponse": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/User"
                    },
                    {
                        "properties": {
                            "full_name": {
                                "description": "Nombre completo generado a partir de first_name y last_name",
                                "type": "string",
                                "readOnly": true,
                                "example": "Juan Pérez"
                            }
                        },
                        "type": "object"
                    }
                ]
            },
            "ValidationError": {
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "The given data was invalid."
                    },
                    "errors": {
                        "properties": {
                            "field_name": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "example": "The field is required."
                                }
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "PaginatedResponse": {
                "properties": {
                    "current_page": {
                        "type": "integer",
                        "example": 1
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "first_page_url": {
                        "type": "string",
                        "example": "http://localhost/api/users?page=1"
                    },
                    "from": {
                        "type": "integer",
                        "example": 1
                    },
                    "last_page": {
                        "type": "integer",
                        "example": 10
                    },
                    "last_page_url": {
                        "type": "string",
                        "example": "http://localhost/api/users?page=10"
                    },
                    "links": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "next_page_url": {
                        "type": "string",
                        "example": "http://localhost/api/users?page=2"
                    },
                    "path": {
                        "type": "string",
                        "example": "http://localhost/api/users"
                    },
                    "per_page": {
                        "type": "integer",
                        "example": 15
                    },
                    "prev_page_url": {
                        "type": "string",
                        "example": null
                    },
                    "to": {
                        "type": "integer",
                        "example": 15
                    },
                    "total": {
                        "type": "integer",
                        "example": 150
                    }
                },
                "type": "object"
            },
            "Product": {
                "title": "Product",
                "description": "Modelo de producto para gestión de inventario en micronegocios",
                "properties": {
                    "id": {
                        "description": "ID único del producto",
                        "type": "integer"
                    },
                    "name": {
                        "description": "Nombre del producto",
                        "type": "string"
                    },
                    "image_path": {
                        "description": "Ruta de la imagen del producto",
                        "type": "string",
                        "nullable": true
                    },
                    "category_id": {
                        "description": "ID de la categoría",
                        "type": "integer"
                    },
                    "cost_price": {
                        "description": "Precio de costo",
                        "type": "number",
                        "format": "decimal"
                    },
                    "sale_price": {
                        "description": "Precio de venta",
                        "type": "number",
                        "format": "decimal"
                    },
                    "stock": {
                        "description": "Cantidad en stock",
                        "type": "integer"
                    },
                    "min_stock": {
                        "description": "Stock mínimo para alertas",
                        "type": "integer"
                    },
                    "is_active": {
                        "description": "Estado activo del producto",
                        "type": "boolean"
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "description": "Fecha de actualización",
                        "type": "string",
                        "format": "date-time"
                    },
                    "category": {
                        "$ref": "#/components/schemas/Category"
                    },
                    "image_url": {
                        "description": "URL completa de la imagen del producto",
                        "type": "string",
                        "nullable": true
                    },
                    "profit_margin": {
                        "description": "Margen de ganancia en porcentaje",
                        "type": "number",
                        "format": "decimal"
                    },
                    "profit_amount": {
                        "description": "Ganancia en valor absoluto",
                        "type": "number",
                        "format": "decimal"
                    },
                    "stock_status": {
                        "description": "Estado del stock",
                        "type": "string",
                        "enum": ["in_stock", "low_stock", "out_of_stock"]
                    }
                },
                "type": "object"
            },
            "PurchaseItems": {
                "required": [
                    "purchase_id",
                    "product_id",
                    "quantity",
                    "unit_cost"
                ],
                "properties": {
                    "id": {
                        "description": "ID único del item de compra",
                        "type": "integer"
                    },
                    "purchase_id": {
                        "description": "ID de la compra",
                        "type": "integer"
                    },
                    "product_id": {
                        "description": "ID del producto",
                        "type": "integer"
                    },
                    "quantity": {
                        "description": "Cantidad comprada",
                        "type": "integer"
                    },
                    "unit_cost": {
                        "description": "Costo unitario",
                        "type": "number",
                        "format": "float"
                    },
                    "line_total": {
                        "description": "Total de la línea",
                        "type": "number",
                        "format": "float"
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time"
                    },
                    "product_name": {
                        "description": "Nombre del producto",
                        "type": "string"
                    },
                    "total_formatted": {
                        "description": "Total formateado",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Purchase": {
                "required": ["purchase_date", "received_by"],
                "properties": {
                    "id": {
                        "description": "ID único de la compra",
                        "type": "integer",
                        "example": 1
                    },
                    "supplier_name": {
                        "description": "Nombre del proveedor",
                        "type": "string",
                        "example": "Distribuidora ABC"
                    },
                    "total": {
                        "description": "Total de la compra",
                        "type": "number",
                        "format": "decimal",
                        "example": 250000.5
                    },
                    "notes": {
                        "description": "Notas adicionales",
                        "type": "string",
                        "example": "Compra de productos varios"
                    },
                    "purchase_date": {
                        "description": "Fecha de la compra",
                        "type": "string",
                        "format": "date",
                        "example": "2025-08-24"
                    },
                    "received_by": {
                        "description": "ID del usuario que recibió",
                        "type": "integer",
                        "example": 1
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-08-24T10:30:00Z"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    },
                    "items": {
                        "description": "Items de la compra",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PurchaseItems"
                        }
                    },
                    "items_count": {
                        "description": "Número total de items",
                        "type": "integer",
                        "example": 5
                    },
                    "total_quantity": {
                        "description": "Cantidad total de productos",
                        "type": "integer",
                        "example": 25
                    },
                    "total_formatted": {
                        "description": "Total formateado",
                        "type": "string",
                        "example": "$250,000.50"
                    }
                },
                "type": "object"
            },
            "SaleItem": {
                "title": "Sale Item",
                "description": "Item de venta - detalle de productos vendidos",
                "required": ["sale_id", "product_id", "quantity", "unit_price"],
                "properties": {
                    "id": {
                        "description": "ID único del item de venta",
                        "type": "integer",
                        "format": "int64"
                    },
                    "sale_id": {
                        "description": "ID de la venta",
                        "type": "integer",
                        "format": "int64"
                    },
                    "product_id": {
                        "description": "ID del producto",
                        "type": "integer",
                        "format": "int64"
                    },
                    "quantity": {
                        "description": "Cantidad vendida",
                        "type": "integer",
                        "minimum": 1
                    },
                    "unit_price": {
                        "description": "Precio unitario",
                        "type": "number",
                        "format": "decimal",
                        "minimum": 0
                    },
                    "line_total": {
                        "description": "Total de la línea (calculado automáticamente)",
                        "type": "number",
                        "format": "decimal"
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time"
                    },
                    "sale": {
                        "$ref": "#/components/schemas/Sale"
                    },
                    "product": {
                        "$ref": "#/components/schemas/Product"
                    }
                },
                "type": "object"
            },
            "Sale": {
                "title": "Sale",
                "description": "Modelo de venta para registro de transacciones en micronegocios",
                "properties": {
                    "id": {
                        "description": "ID único de la venta",
                        "type": "integer"
                    },
                    "sale_number": {
                        "description": "Número único de venta",
                        "type": "string"
                    },
                    "customer_name": {
                        "description": "Nombre del cliente",
                        "type": "string",
                        "nullable": true
                    },
                    "total": {
                        "description": "Total de la venta",
                        "type": "number",
                        "format": "decimal"
                    },
                    "payment_method": {
                        "description": "Método de pago",
                        "type": "string",
                        "enum": ["cash", "card", "transfer", "credit"]
                    },
                    "notes": {
                        "description": "Notas adicionales",
                        "type": "string",
                        "nullable": true
                    },
                    "sale_date": {
                        "description": "Fecha de la venta",
                        "type": "string",
                        "format": "date"
                    },
                    "sold_by": {
                        "description": "ID del usuario que realizó la venta",
                        "type": "integer"
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "description": "Fecha de actualización",
                        "type": "string",
                        "format": "date-time"
                    },
                    "seller": {
                        "description": "Usuario que realizó la venta",
                        "type": "object"
                    },
                    "sale_items": {
                        "description": "Productos vendidos",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "items_count": {
                        "description": "Cantidad total de productos",
                        "type": "integer"
                    },
                    "payment_method_label": {
                        "description": "Etiqueta del método de pago",
                        "type": "string"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Laravel Sanctum token authentication",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Autenticación y gestión de sesiones"
        },
        {
            "name": "Users",
            "description": "Gestión de usuarios (propietarios y empleados)"
        },
        {
            "name": "Business",
            "description": "Configuración e información del negocio"
        },
        {
            "name": "Business Intelligence",
            "description": "Funciones de inteligencia de negocio para chatbot IA"
        },
        {
            "name": "Products",
            "description": "Products"
        },
        {
            "name": "Purchase Items",
            "description": "Gestión de items de compras"
        },
        {
            "name": "Purchases",
            "description": "Gestión de compras/entradas de inventario"
        },
        {
            "name": "Sale Items",
            "description": "Gestión de items de venta - detalle de productos vendidos"
        },
        {
            "name": "Categories",
            "description": "Categories"
        },
        {
            "name": "Sales",
            "description": "Sales"
        }
    ]
}
